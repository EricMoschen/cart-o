<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <title>Mini Declara√ß√£o</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
  <link
    href="https://fonts.googleapis.com/css2?family=Great+Vibes&display=swap"
    rel="stylesheet"
  />
  <style>
    /* ...mesmo CSS do c√≥digo anterior... */
    * {
      box-sizing: border-box;
    }

    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      background: black;
      font-family: Arial, sans-serif;
      color: white;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      position: relative;
      -webkit-text-size-adjust: 100%;
    }

    canvas {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw !important;
      height: 100vh !important;
      z-index: 0;
      pointer-events: none;
      will-change: transform;
    }

    #container {
      z-index: 10;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 20px;
      padding: 0 20px;
      max-width: 100vw;
      text-align: center;
      flex-grow: 1;
      justify-content: center;
      min-height: 150px;
    }

    #startBtn {
      padding: 20px 40px;
      font-size: 28px;
      border: none;
      border-radius: 16px;
      background: #ff69b4;
      color: white;
      cursor: pointer;
      user-select: none;
      transition: transform 0.2s;
      max-width: 90vw;
      box-shadow: 0 0 10px #ff4da6;
    }

    #startBtn:hover {
      transform: scale(1.05);
    }

    #loveText {
      font-family: "Great Vibes", cursive;
      font-size: 48px;
      color: white;
      text-shadow: 0 0 10px #ff4da6, 0 0 20px #ff4da6;
      opacity: 0;
      transition: opacity 0.5s ease-in-out;
      max-width: 90vw;
      word-wrap: break-word;
      min-height: 70px;
      user-select: none;
    }

    #dedicatoria {
      font-size: 16px;
      color: #ff4da6cc;
      user-select: none;
      max-width: 90vw;
      position: fixed;
      bottom: 10px;
      left: 50%;
      transform: translateX(-50%);
      z-index: 15;
      text-align: center;
      padding: 0 10px;
    }

    @keyframes heartPulse {
      0%, 100% {
        transform: scale(1);
      }
      50% {
        transform: scale(1.1);
      }
    }

    #heartCanvas.pulsing {
      animation: heartPulse 1.5s infinite;
    }

    @media (max-width: 480px) {
      #startBtn {
        font-size: 32px;
        padding: 24px 48px;
      }
      #loveText {
        font-size: 28px;
        min-height: 100px;
      }
      #dedicatoria {
        font-size: 14px;
      }
    }
  </style>
</head>
<body>
  <canvas id="heartCanvas"></canvas>
  <canvas id="miniHearts"></canvas>

  <div id="container">
    <button id="startBtn">Clique Aqui üíñ</button>
    <div id="loveText"></div>
  </div>

  <div id="dedicatoria">Feito com carinho para voc√™, J√©ssica ‚ù§Ô∏è</div>

  <script>
    const canvasHeart = document.getElementById("heartCanvas");
    const ctxHeart = canvasHeart.getContext("2d");

    const canvasMini = document.getElementById("miniHearts");
    const ctxMini = canvasMini.getContext("2d");

    const loveText = document.getElementById("loveText");
    const button = document.getElementById("startBtn");

    function resizeCanvas() {
      canvasHeart.width = canvasMini.width = window.innerWidth;
      canvasHeart.height = canvasMini.height = window.innerHeight;
    }

    resizeCanvas();

    let miniHearts = [];

    class MiniHeart {
      constructor() {
        this.reset();
      }

      reset() {
        this.x = Math.random() * canvasMini.width;
        this.y = -20;
        this.size = Math.random() * 6 + 4;
        this.speedY = Math.random() * 2 + 1;
        this.alpha = Math.random() * 0.5 + 0.5;
      }

      update() {
        this.y += this.speedY;
        if (this.y > canvasMini.height) this.reset();
      }

      draw() {
        ctxMini.save();
        ctxMini.globalAlpha = this.alpha;
        ctxMini.fillStyle = "#ff4da6";
        ctxMini.beginPath();
        const x = this.x;
        const y = this.y;
        const s = this.size;
        ctxMini.moveTo(x, y);
        ctxMini.bezierCurveTo(x - s, y - s, x - s * 1.5, y + s / 2, x, y + s);
        ctxMini.bezierCurveTo(x + s * 1.5, y + s / 2, x + s, y - s, x, y);
        ctxMini.fill();
        ctxMini.restore();
      }
    }

    function createMiniHearts(count) {
      miniHearts = [];
      for (let i = 0; i < count; i++) {
        miniHearts.push(new MiniHeart());
      }
    }

    function animateMiniHearts() {
      ctxMini.clearRect(0, 0, canvasMini.width, canvasMini.height);
      miniHearts.forEach((h) => {
        h.update();
        h.draw();
      });
      requestAnimationFrame(animateMiniHearts);
    }

    function drawBigHeartFrame() {
      const ctx = ctxHeart;
      const w = canvasHeart.width;
      const h = canvasHeart.height;
      const centerX = w / 2;
      const centerY = h / 2;

      ctx.clearRect(0, 0, w, h);
      ctx.beginPath();

      for (let t = 0; t <= Math.PI * 2; t += 0.01) {
        let x = 16 * Math.pow(Math.sin(t), 3);
        let y =
          13 * Math.cos(t) -
          5 * Math.cos(2 * t) -
          2 * Math.cos(3 * t) -
          Math.cos(4 * t);
        x *= 22;
        y *= 22;

        if (t === 0) {
          ctx.moveTo(centerX + x, centerY - y);
        } else {
          ctx.lineTo(centerX + x, centerY - y);
        }
      }

      const gradient = ctx.createRadialGradient(
        centerX,
        centerY,
        50,
        centerX,
        centerY,
        400
      );
      gradient.addColorStop(0, "#ff4d4d");
      gradient.addColorStop(1, "transparent");

      ctx.strokeStyle = gradient;
      ctx.lineWidth = 6;
      ctx.stroke();
    }

    function animateHeart() {
      drawBigHeartFrame();
      requestAnimationFrame(animateHeart);
    }

    const lyrics = [
      "Eu t√¥ apaixonado, eu t√¥ contando tudo",
      "E n√£o t√¥ nem ligando pro que v√£o dizer",
      "Amar n√£o √© pecado e se eu tiver errado",
      "Que se dane o mundo, eu s√≥ quero voc√™"
    ];

    function showLyricsSequentially(lines, index = 0) {
      if (index >= lines.length) {
        setTimeout(() => {
          loveText.style.opacity = 0;
          setTimeout(() => {
            loveText.textContent = "Eu te Amo";
            loveText.style.opacity = 1;

            setTimeout(() => {
              loveText.style.opacity = 0;
              setTimeout(() => {
                loveText.textContent = "To Com Saudadeü•∫";
                loveText.style.opacity = 1;
              }, 500);
            }, 1000);
          }, 500);
        }, 500);
        return;
      }

      loveText.style.opacity = 0;
      setTimeout(() => {
        loveText.textContent = lines[index];
        loveText.style.opacity = 1;

        setTimeout(() => {
          loveText.style.opacity = 0;
          setTimeout(() => {
            showLyricsSequentially(lines, index + 1);
          }, 500);
        }, 3000);
      }, 500);
    }

    ["click", "touchstart"].forEach((eventType) => {
      button.addEventListener(eventType, (e) => {
        e.preventDefault();
        if (button.style.display === "none") return;

        button.style.display = "none";

        // Come√ßar anima√ß√£o da chuva de cora√ß√µes pequenos
        createMiniHearts(100);
        animateMiniHearts();

        // A m√∫sica foi removida, ent√£o aqui n√£o toca nada mais

        // Ap√≥s 4 segundos, aparecer cora√ß√£o grande e letras
        setTimeout(() => {
          canvasHeart.classList.add("pulsing");
          loveText.style.opacity = 1;
          animateHeart();
          showLyricsSequentially(lyrics);
        }, 4000);
      });
    });

    window.addEventListener("resize", () => {
      resizeCanvas();
    });
  </script>
</body>
</html>
